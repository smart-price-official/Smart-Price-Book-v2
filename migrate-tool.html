<!DOCTYPE html>
<html lang="ja">
<head>
  <!--
  APP: Smart Price / Migrate Tool
  VERSION: v0.3.1-wizard-url
  DATE(JST): 2026-02-09 19:10 JST
  AUTHOR: YUI
  TITLE: Smart Price / Migrate Tool - URLç›´æ¥æ¤œè¨¼ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰
  CHANGES:
    - URLå…¥åŠ›æ¬„ã‚’è¿½åŠ ï¼ˆã‚¿ãƒ–ã«ä¾å­˜ã›ãšã€è²¼ã‚Šä»˜ã‘ãŸURLã‚’å¯¾è±¡ã«ç‚¹æ¤œã§ãã‚‹å°ç·šï¼‰
    - å…¥åŠ›URLã‚’å±¥æ­´ï¼ˆlocalStorageï¼‰ã«ä¿å­˜ã—ã€å†åˆ©ç”¨ã—ã‚„ã™ã
    - æ¬¡ã«æŠ¼ã™ãƒœã‚¿ãƒ³ï¼ˆNEXTï¼‰ã‚’å¼·èª¿
  BUILD_PARAM (b): 2026-02-09_1910_urlwizard
  DEBUG_PARAM: &debug=1
  POLICY: æœ¬ä½“ï¼ˆSmart Priceï¼‰ã«ã¯ä¸€åˆ‡è§¦ã‚Œãªã„ã€‚è¨ºæ–­ãƒ»æ¯”è¼ƒãƒ»ç§»è¡Œè£œåŠ©ã®ã¿ã€‚
  -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smart Price / Migrate Tool - URLç›´æ¥æ¤œè¨¼ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ v0.3.1-wizard-url</title>
  <style>
    :root {
      --bg: #0b1020;
      --line: rgba(255,255,255,.12);
      --muted: rgba(255,255,255,.72);
      --muted2: rgba(255,255,255,.55);
      --accent: #6ea8ff;
      --ok: #4ade80;
      --warn: #fbbf24;
      --err: #fb7185;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans JP", sans-serif;
      background: radial-gradient(1200px 900px at 20% 10%, #1a2755 0%, var(--bg) 55%, #060914 100%);
      color: #fff;
      padding: 16px;
    }
    .wrap { max-width: 980px; margin: 0 auto; }
    .top { display:flex; gap:12px; align-items:flex-start; justify-content:space-between; margin-bottom: 14px; }
    .title { font-size: 18px; font-weight: 700; line-height: 1.3; }
    .meta { font-size: 12px; color: var(--muted2); text-align:right; white-space:nowrap; }
    .hint { font-size: 12px; color: var(--muted2); line-height: 1.5; margin-top: 6px; }
    .grid { display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 820px) {
      .grid { grid-template-columns: 1fr; }
      .meta { text-align:left; white-space:normal; }
      .top { flex-direction:column; align-items:flex-start; }
    }
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 14px;
      box-shadow: 0 10px 28px rgba(0,0,0,.25);
    }
    .card h2 {
      margin: 0 0 10px 0;
      font-size: 14px;
      color: rgba(255,255,255,.9);
      display:flex;
      align-items:center;
      gap: 8px;
    }
    .pill { font-size: 11px; padding: 3px 8px; border: 1px solid var(--line); border-radius: 999px; color: var(--muted2); }
    label { font-size: 12px; color: var(--muted); }
    input[type="url"], textarea {
      width: 100%;
      background: rgba(0,0,0,.22);
      border: 1px solid var(--line);
      color: #fff;
      border-radius: 10px;
      padding: 10px 10px;
      font-size: 13px;
      outline: none;
    }
    textarea {
      min-height: 140px;
      resize: vertical;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace;
      color: rgba(255,255,255,.88);
    }
    .row { display:flex; gap: 10px; flex-wrap: wrap; align-items:center; margin-top: 10px; }
    .btn {
      background: linear-gradient(180deg, rgba(110,168,255,.25), rgba(110,168,255,.10));
      border: 1px solid rgba(110,168,255,.35);
      color: #fff;
      padding: 10px 12px;
      border-radius: 12px;
      font-size: 13px;
      font-weight: 650;
      cursor: pointer;
      user-select:none;
      transition: transform .06s ease;
      min-width: 180px;
    }
    .btn:active { transform: translateY(1px); }
    .btn2 { background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06)); border: 1px solid var(--line); }
    .btnSmall { min-width: auto; padding: 8px 10px; border-radius: 10px; font-size: 12px; }
    .next {
      border: 2px solid rgba(110,168,255,.65);
      box-shadow: 0 0 0 4px rgba(110,168,255,.12);
    }
    .status {
      margin-top: 10px;
      border-radius: 12px;
      padding: 10px;
      border: 1px solid var(--line);
      background: rgba(0,0,0,.18);
      font-size: 12px;
      line-height: 1.55;
      color: rgba(255,255,255,.82);
      white-space: pre-wrap;
      word-break: break-word;
      min-height: 74px;
    }
    .ok { color: var(--ok); }
    .warn { color: var(--warn); }
    .err { color: var(--err); }
    .k { display:inline-block; padding: 2px 7px; border-radius: 999px; border:1px solid var(--line); background: rgba(255,255,255,.04); margin-right: 6px; font-size: 11px; color: rgba(255,255,255,.78); }
    .divider { height:1px; background: var(--line); margin: 12px 0; }
    .foot { margin-top: 12px; color: var(--muted2); font-size: 12px; line-height: 1.6; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div>
        <div class="title">ğŸ” Smart Price / Migrate Toolï¼ˆURLç›´æ¥æ¤œè¨¼ï¼‰</div>
        <div class="hint">ã‚¿ãƒ–ã§è¿·ã‚ãªã„ã‚ˆã†ã«ã€<span class="k">URLã‚’è²¼ã‚‹</span>â†’<span class="k">ç‚¹æ¤œ</span>â†’<span class="k">æ¯”è¼ƒ</span>ã®æµã‚Œã«å›ºå®šã€‚</div>
      </div>
      <div class="meta">
        <div>v0.3.1-wizard-url</div>
        <div>2026-02-09 19:10 JST</div>
        <div>AUTHOR: YUI</div>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h2>â‘  æ­£æœ¬ï¼ˆãƒã‚¹ã‚¿ãƒ¼ï¼‰ <span class="pill">å·¦</span></h2>
        <label>å¯¾è±¡URLï¼ˆã“ã“ã«è²¼ã‚‹ï¼‰</label>
        <input id="leftUrl" type="url" placeholder="ä¾‹ï¼‰https://smart-price-official.github.io/Smart-Price-Book/?b=....&mode=admin&debug=1" />
        <div class="row">
          <button class="btn next" id="leftInspect">ã“ã®URLã®ãƒ‡ãƒ¼ã‚¿ã‚’ç‚¹æ¤œ</button>
          <button class="btn btn2" id="leftOpen">ã“ã®URLã‚’é–‹ã</button>
          <button class="btn btn2 btnSmall" id="leftUseCurrent">ä»Šã®URLã‚’å…¥ã‚Œã‚‹</button>
        </div>
        <div class="divider"></div>
        <label>ã‚µãƒãƒªJSONï¼ˆè‡ªå‹• / æ‰‹å‹•è²¼ã‚Šä»˜ã‘OKï¼‰</label>
        <textarea id="leftSummary" placeholder="ç‚¹æ¤œã™ã‚‹ã¨è‡ªå‹•ã§å…¥ã‚Šã¾ã™ã€‚ã“ã“ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦å³å´ã«è²¼ã£ã¦ã‚‚OKã€‚"></textarea>
        <div class="row">
          <button class="btn" id="leftCopy">ã‚µãƒãƒªJSONã‚’ã‚³ãƒ”ãƒ¼</button>
          <button class="btn btn2" id="leftSave">ã“ã®URLã‚’ä¿å­˜ï¼ˆå±¥æ­´ï¼‰</button>
          <button class="btn btn2" id="leftPick">å±¥æ­´ã‹ã‚‰é¸ã¶</button>
        </div>
        <div class="status" id="leftStatus">å·¦ã«ã€Œå‹•ã„ã¦ã„ã‚‹æ­£æœ¬URLï¼ˆv19.9.43[0207]ï¼‰ã€ã‚’è²¼ã£ã¦ã€ç‚¹æ¤œã‚’æŠ¼ã—ã¦ã­ã€‚</div>
      </div>

      <div class="card">
        <h2>â‘¡ ç›¸æ‰‹ï¼ˆå–ã‚Šè¾¼ã¿å…ˆï¼‰ <span class="pill">å³</span></h2>
        <label>å¯¾è±¡URLï¼ˆã“ã“ã«è²¼ã‚‹ï¼‰</label>
        <input id="rightUrl" type="url" placeholder="ä¾‹ï¼‰https://smart-price-official.github.io/Smart-Price-Book/" />
        <div class="row">
          <button class="btn next" id="rightInspect">ã“ã®URLã®ãƒ‡ãƒ¼ã‚¿ã‚’ç‚¹æ¤œ</button>
          <button class="btn btn2" id="rightOpen">ã“ã®URLã‚’é–‹ã</button>
          <button class="btn btn2 btnSmall" id="rightUseCurrent">ä»Šã®URLã‚’å…¥ã‚Œã‚‹</button>
        </div>
        <div class="divider"></div>
        <label>ã‚µãƒãƒªJSONï¼ˆè‡ªå‹• / æ‰‹å‹•è²¼ã‚Šä»˜ã‘OKï¼‰</label>
        <textarea id="rightSummary" placeholder="å³å´ã‚‚ç‚¹æ¤œã™ã‚‹ã¨è‡ªå‹•ã§å…¥ã‚Šã¾ã™ã€‚å·¦ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã£ã¦ã‚‚OKã€‚"></textarea>
        <div class="row">
          <button class="btn" id="rightCopy">ã‚µãƒãƒªJSONã‚’ã‚³ãƒ”ãƒ¼</button>
          <button class="btn btn2" id="rightSave">ã“ã®URLã‚’ä¿å­˜ï¼ˆå±¥æ­´ï¼‰</button>
          <button class="btn btn2" id="rightPick">å±¥æ­´ã‹ã‚‰é¸ã¶</button>
        </div>
        <div class="status" id="rightStatus">å³ã«ã€Œç¾è¡ŒPagesãªã©ã®URLã€ã‚’è²¼ã£ã¦ç‚¹æ¤œã€‚æƒã£ãŸã‚‰ä¸‹ã®æ¯”è¼ƒã¸ã€‚</div>
      </div>
    </div>

    <div class="card" style="margin-top:12px;">
      <h2>â‘¢ æ¯”è¼ƒã—ã¦çµè«–ã‚’å‡ºã™ <span class="pill">ãƒ¯ãƒ³ã‚¿ãƒƒãƒ</span></h2>
      <div class="row">
        <button class="btn next" id="compare">æ¯”è¼ƒã—ã¦çµè«–ã‚’å‡ºã™</button>
        <button class="btn btn2" id="swap">å·¦â‡„å³ã‚’å…¥ã‚Œæ›¿ãˆã‚‹</button>
        <button class="btn btn2" id="reset">å…¨éƒ¨ã‚¯ãƒªã‚¢</button>
      </div>
      <div class="status" id="compareStatus">å·¦ã¨å³ã®ã‚µãƒãƒªãŒå…¥ã£ãŸã‚‰ã€Œæ¯”è¼ƒã€ã‚’æŠ¼ã™ã ã‘ã€‚</div>

      <div class="foot">
        <div class="divider"></div>
        <div>â€» æ³¨æ„ï¼šã“ã®ãƒ„ãƒ¼ãƒ«ã¯ <b>URLã§é–‹ã‘ã‚‹ãƒšãƒ¼ã‚¸</b> ã®ç¯„å›²ã§ã—ã‹ç‚¹æ¤œã§ãã¾ã›ã‚“ï¼ˆcontent:// ã®ãƒ­ãƒ¼ã‚«ãƒ«è¡¨ç¤ºã¯å¤–ï¼‰ã€‚</div>
        <div>â€» å®Ÿãƒ‡ãƒ¼ã‚¿æ¯”è¼ƒã¯ã€Smart Priceæœ¬ä½“ã® <b>Export/Copy</b> ã§å‡ºã—ãŸJSONã‚’è²¼ã‚Šä»˜ã‘ã¦æ¯”ã¹ã‚‹ã®ãŒç¢ºå®Ÿã€‚</div>
      </div>
    </div>
  </div>

<script>
(() => {
  const VERSION = "v0.3.1-wizard-url";
  const BUILD = "2026-02-09_1910_urlwizard";
  const KEY = "__sp_migrate_url_history__";
  const $ = (id) => document.getElementById(id);

  const ui = {
    leftUrl: $("leftUrl"),
    rightUrl: $("rightUrl"),
    leftSummary: $("leftSummary"),
    rightSummary: $("rightSummary"),
    leftStatus: $("leftStatus"),
    rightStatus: $("rightStatus"),
    compareStatus: $("compareStatus"),
    leftInspect: $("leftInspect"),
    rightInspect: $("rightInspect"),
    compare: $("compare"),
    leftCopy: $("leftCopy"),
    rightCopy: $("rightCopy"),
    leftOpen: $("leftOpen"),
    rightOpen: $("rightOpen"),
    leftUseCurrent: $("leftUseCurrent"),
    rightUseCurrent: $("rightUseCurrent"),
    swap: $("swap"),
    reset: $("reset"),
    leftSave: $("leftSave"),
    rightSave: $("rightSave"),
    leftPick: $("leftPick"),
    rightPick: $("rightPick"),
  };

  function nowJST() {
    return new Date().toLocaleString("ja-JP", { hour12:false });
  }

  function setStatus(el, msg, cls) {
    el.className = "status" + (cls ? " " + cls : "");
    el.textContent = msg;
  }

  function parseUrlSafe(s) {
    try { return new URL(s); } catch(e) { return null; }
  }

  function getHistory() {
    try {
      const raw = localStorage.getItem(KEY);
      if (!raw) return [];
      const arr = JSON.parse(raw);
      return Array.isArray(arr) ? arr : [];
    } catch(e) { return []; }
  }

  function saveHistory(url) {
    const u = (url || "").trim();
    if (!u) return false;
    const cur = getHistory();
    const next = [u, ...cur.filter(x => x !== u)].slice(0, 15);
    localStorage.setItem(KEY, JSON.stringify(next));
    return true;
  }

  async function copyText(text) {
    const t = text || "";
    try {
      await navigator.clipboard.writeText(t);
      return true;
    } catch(e) {
      const ta = document.createElement("textarea");
      ta.value = t;
      ta.style.position = "fixed";
      ta.style.left = "-9999px";
      document.body.appendChild(ta);
      ta.select();
      try {
        document.execCommand("copy");
        document.body.removeChild(ta);
        return true;
      } catch(e2) {
        document.body.removeChild(ta);
        return false;
      }
    }
  }

  function approxSizeOfLocalStorage() {
    let chars = 0;
    try {
      for (let i=0; i<localStorage.length; i++) {
        const k = localStorage.key(i);
        const v = localStorage.getItem(k) || "";
        chars += (k ? k.length : 0) + v.length;
      }
    } catch(e) {}
    return chars;
  }

  function summarizeHere(inputTargetUrl) {
    const diag = {
      kind: "SmartPriceMigrateWizardDiag",
      toolVersion: VERSION,
      build: BUILD,
      atJST: nowJST(),
      pageUrl: window.location.href,
      inputTargetUrl: inputTargetUrl || "",
      device: {
        ua: navigator.userAgent,
        lang: navigator.language,
        viewport: { w: innerWidth, h: innerHeight, dpr: devicePixelRatio }
      },
      storage: {
        localStorageKeys: (()=>{ try{return localStorage.length;}catch(e){return -1;} })(),
        localStorageApproxChars: approxSizeOfLocalStorage()
      },
      note: "URLå–ã‚Šé•ãˆé˜²æ­¢ç”¨ã®ç‚¹æ¤œã€‚å®Ÿãƒ‡ãƒ¼ã‚¿ï¼ˆè³¼å…¥å±¥æ­´ç­‰ï¼‰ã¯Smart Priceæœ¬ä½“ã®Export/Copyã§å‡ºã™ã€‚"
    };
    return diag;
  }

  function pickFromHistory(side) {
    const hist = getHistory();
    if (!hist.length) { alert("å±¥æ­´ãŒç©ºã§ã™ã€‚URLã‚’ä¿å­˜ã—ã¦ã‹ã‚‰ä½¿ã£ã¦ã­ã€‚"); return; }
    const label = hist.map((u, i) => `${i+1}) ${u}`).join("\n");
    const ans = prompt("å±¥æ­´ç•ªå·ã‚’å…¥åŠ›ï¼ˆä¾‹ï¼š1ï¼‰\n\n" + label, "1");
    if (!ans) return;
    const idx = parseInt(ans, 10) - 1;
    if (isNaN(idx) || idx < 0 || idx >= hist.length) { alert("ç•ªå·ãŒä¸æ­£ã§ã™ã€‚"); return; }
    if (side === "left") ui.leftUrl.value = hist[idx];
    else ui.rightUrl.value = hist[idx];
  }

  function inspect(side) {
    const urlStr = (side === "left" ? ui.leftUrl.value : ui.rightUrl.value).trim();
    const u = parseUrlSafe(urlStr);
    const st = side === "left" ? ui.leftStatus : ui.rightStatus;
    const ta = side === "left" ? ui.leftSummary : ui.rightSummary;

    if (!u) { setStatus(st, "URLãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚https:// ã‹ã‚‰å§‹ã¾ã‚‹URLã‚’è²¼ã£ã¦ãã ã•ã„ã€‚", "err"); return; }

    const diag = summarizeHere(urlStr);
    ta.value = JSON.stringify(diag, null, 2);
    saveHistory(urlStr);

    setStatus(st, "ç‚¹æ¤œOKã€‚æ¬¡ã¯åå¯¾å´ã‚‚åŒã˜â†’æœ€å¾Œã«ã€Œæ¯”è¼ƒã€ã€‚", "ok");
  }

  function safeJsonParse(text) { try { return JSON.parse(text); } catch(e) { return null; } }

  function compare() {
    const L = safeJsonParse(ui.leftSummary.value.trim());
    const R = safeJsonParse(ui.rightSummary.value.trim());
    if (!L || !R) { setStatus(ui.compareStatus, "æ¯”è¼ƒã§ãã¾ã›ã‚“ã€‚å·¦ãƒ»å³ã®ã‚µãƒãƒªJSONãŒä¸¡æ–¹å…¥ã£ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ã­ã€‚", "err"); return; }

    const report = {
      kind: "SmartPriceCompareResult",
      toolVersion: VERSION,
      build: BUILD,
      atJST: nowJST(),
      leftTargetUrl: L.inputTargetUrl || "",
      rightTargetUrl: R.inputTargetUrl || "",
      note: "ã“ã“ã§ã®æ¯”è¼ƒã¯ã€å¯¾è±¡URLã®å–ã‚Šé•ãˆé˜²æ­¢ã€ãŒä¸»ã€‚å®Ÿãƒ‡ãƒ¼ã‚¿ã¯Export/Copyã®JSONã§æ¯”è¼ƒãŒç¢ºå®Ÿã€‚"
    };

    const text = JSON.stringify(report, null, 2);
    setStatus(ui.compareStatus, "æ¯”è¼ƒãƒ¬ãƒãƒ¼ãƒˆã‚’è¡¨ç¤ºã—ã¾ã—ãŸï¼ˆã‚³ãƒ”ãƒ¼ã‚‚è©¦ã¿ã¾ã™ï¼‰ã€‚\n\n" + text, "ok");
    copyText(text);
  }

  function openUrl(side) {
    const urlStr = (side === "left" ? ui.leftUrl.value : ui.rightUrl.value).trim();
    const u = parseUrlSafe(urlStr);
    if (!u) { alert("URLãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚"); return; }
    window.open(urlStr, "_blank", "noopener,noreferrer");
  }

  function useCurrent(side) {
    if (side === "left") ui.leftUrl.value = location.href;
    else ui.rightUrl.value = location.href;
  }

  function swap() {
    [ui.leftUrl.value, ui.rightUrl.value] = [ui.rightUrl.value, ui.leftUrl.value];
    [ui.leftSummary.value, ui.rightSummary.value] = [ui.rightSummary.value, ui.leftSummary.value];
    setStatus(ui.compareStatus, "å·¦â‡„å³ã‚’å…¥ã‚Œæ›¿ãˆã¾ã—ãŸã€‚å¿…è¦ãªã‚‰ç‚¹æ¤œã—ç›´ã—ã¦ã­ã€‚", "warn");
  }

  function resetAll() {
    ui.leftUrl.value = "";
    ui.rightUrl.value = "";
    ui.leftSummary.value = "";
    ui.rightSummary.value = "";
    setStatus(ui.leftStatus, "å·¦ã«ã€Œå‹•ã„ã¦ã„ã‚‹æ­£æœ¬URLï¼ˆv19.9.43[0207]ï¼‰ã€ã‚’è²¼ã£ã¦ã€ç‚¹æ¤œã‚’æŠ¼ã—ã¦ã­ã€‚");
    setStatus(ui.rightStatus, "å³ã«ã€Œç¾è¡ŒPagesãªã©ã®URLã€ã‚’è²¼ã£ã¦ç‚¹æ¤œã€‚æƒã£ãŸã‚‰ä¸‹ã®æ¯”è¼ƒã¸ã€‚");
    setStatus(ui.compareStatus, "å·¦ã¨å³ã®ã‚µãƒãƒªãŒå…¥ã£ãŸã‚‰ã€Œæ¯”è¼ƒã€ã‚’æŠ¼ã™ã ã‘ã€‚");
  }

  ui.leftInspect.addEventListener("click", () => inspect("left"));
  ui.rightInspect.addEventListener("click", () => inspect("right"));
  ui.compare.addEventListener("click", compare);

  ui.leftCopy.addEventListener("click", async () => {
    const ok = await copyText(ui.leftSummary.value || "");
    setStatus(ui.leftStatus, ok ? "ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚å³ã‚‚ç‚¹æ¤œâ†’æ¯”è¼ƒã¸ã€‚" : "ã‚³ãƒ”ãƒ¼å¤±æ•—ã€‚é•·æŠ¼ã—ã§å…¨é¸æŠâ†’ã‚³ãƒ”ãƒ¼ã—ã¦ã­ã€‚", ok ? "ok" : "warn");
  });
  ui.rightCopy.addEventListener("click", async () => {
    const ok = await copyText(ui.rightSummary.value || "");
    setStatus(ui.rightStatus, ok ? "ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚æ¯”è¼ƒã¸ã€‚" : "ã‚³ãƒ”ãƒ¼å¤±æ•—ã€‚é•·æŠ¼ã—ã§å…¨é¸æŠâ†’ã‚³ãƒ”ãƒ¼ã—ã¦ã­ã€‚", ok ? "ok" : "warn");
  });

  ui.leftOpen.addEventListener("click", () => openUrl("left"));
  ui.rightOpen.addEventListener("click", () => openUrl("right"));
  ui.leftUseCurrent.addEventListener("click", () => useCurrent("left"));
  ui.rightUseCurrent.addEventListener("click", () => useCurrent("right"));

  ui.swap.addEventListener("click", swap);
  ui.reset.addEventListener("click", resetAll);

  ui.leftSave.addEventListener("click", () => {
    const ok = saveHistory(ui.leftUrl.value.trim());
    setStatus(ui.leftStatus, ok ? "ä¿å­˜ã—ã¾ã—ãŸã€‚å±¥æ­´ã‹ã‚‰é¸ã¹ã¾ã™ã€‚" : "ä¿å­˜ã§ãã¾ã›ã‚“ã€‚URLã‚’å…¥ã‚Œã¦ã‹ã‚‰æŠ¼ã—ã¦ã­ã€‚", ok ? "ok" : "warn");
  });
  ui.rightSave.addEventListener("click", () => {
    const ok = saveHistory(ui.rightUrl.value.trim());
    setStatus(ui.rightStatus, ok ? "ä¿å­˜ã—ã¾ã—ãŸã€‚å±¥æ­´ã‹ã‚‰é¸ã¹ã¾ã™ã€‚" : "ä¿å­˜ã§ãã¾ã›ã‚“ã€‚URLã‚’å…¥ã‚Œã¦ã‹ã‚‰æŠ¼ã—ã¦ã­ã€‚", ok ? "ok" : "warn");
  });
  ui.leftPick.addEventListener("click", () => pickFromHistory("left"));
  ui.rightPick.addEventListener("click", () => pickFromHistory("right"));

  const debug = new URLSearchParams(location.search).get("debug");
  if (debug === "1") {
    setStatus(ui.compareStatus, ui.compareStatus.textContent + "\n\n[DEBUG] " + VERSION + " / BUILD=" + BUILD);
  }
})();
</script>
</body>
</html>
